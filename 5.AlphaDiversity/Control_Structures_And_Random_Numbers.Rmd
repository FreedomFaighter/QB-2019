---
title: "Control Structures and Random Numbers"
author: "Jordan Bird and Daniel Schwartz"
date: "`r format(Sys.time(), '%d %B, %Y')`"
header-includes:
   - \usepackage{array}
output: pdf_document
geometry: margin=2.54cm
---

## Overview

In Dante's satire of hell each layer contains a new iterative task for the tortured to endure for eternity. Much of the power of computing stems from the efficiency of computers in performing small tasks in an iterative manner. This lesson introducts the concepts of control structures and random numbers. We will use these tools to understand the diversity of jellybeans flavors, but these basic tools are useful for a numbers of tasks in computing and will help you automate many of your future work flows.


Control structures allow you to control the flow of execution of a script. Today, we will focus on the "for loop", but other common control structures include: 
"if, else"
"while"
and "next"

A quick tutorial of common control structures in R can be found at https://ramnathv.github.io/pycon2014-r/learn/controls.html

Befor we get started lets clear up our session.

```{r}
# clear up the environment
rm(list = ls())
#clear the console
cat("\f")
```

# the if and else logical tests
Short intro: when and why to use
1. syntax
2. example
3. "if"" accepts logical values; can accept numbers but not strings.
4. "if"" can be complemented by an "else"
5. ifelse as shorthand
6. if-else can be strung to create hirearchy of tests

# The for loop

Let's start by introducing the "for loop" as a control structure.

**Place holder**
The basic syntax of the for statement

```{r}
for(i in 1:10){
  print(i)
}
```

In this sturcture i is a variable that will hold each interger from 1 to 10 during each successive pass through the loop.

You can use this structure to move through each item of vector and perfrom any number of tasks to each element.

Like printing out a list of fruits.
```{r}
x <- c("apples", "oranges", "bananas", "strawberries")

for (i in seq(x)) {
    print(x[i])
}
```
**Note that a for loop can iterate over any type of vector: logical, numerical, string. You can also iterate over vectors using indices (R counts from 1 and not form 0 like some other languages)**

**This chunk below seems to be going off topic with strings. That might need to be developed as an idependrnt unit.**
Or printing out a list of fruit.

```{r}
if (!require("stringr")) install.packages("stringr")
library(stringr)

for (i in seq(x)) {
    print(str_sub(x[i],1,-2))
}
```

Here we saw saw an example of how two control structures could be used together. If the first statement allowed use to check and  see if the proper library for handling strings was loaded on to our R packages and the second gave use an inventive new spelling for the word strawberry.

**Note on the use of for loops**
When possible try to avoid them. They take a long time to execute and are somewhat clumsy. consider using apply type functions.

# combining for and if
e.g. print only numbers that can be divided by 3

**mention that there are also 'while' loops. Need catioun to have a breaking point

#Using loops and ifs to simulate Jelly bean exersice
1. Generate a community by drawing from lognormal distribution
```{r}
set.seed(6)
digital.jelly <- round(rlnorm(n = 20, meanlog = 5 ))
names(digital.jelly) <- paste0("species.",LETTERS[seq(digital.jelly)])
digital.jelly <- sort(digital.jelly,decreasing = T)
plot(digital.jelly, log='y')
```

Explain the details of commands above

2. Sample community
generate a single sample

3. Calculate for alpha diversity parameters for single samples and for source community

4. repeat sampling and calculations 100 times using for loop and look at estimated prameter distribution along with real value.

5. using for loop generate multiple communities and repeat 2-4 with beta diversity




